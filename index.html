<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Tetris Attempt</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="css/main.css" />
</head>
<body>

    <div id="board"></div>



    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/343cc4bbfb.js"></script>

    <script>

    var min = 0
    var max = 25
    
    var Grid = function () {
        for (i = 0; i < max; i++){
            $("#board").append("<div class='trow r" + i +"'></div>");
        }
        for (i = 0; i < max; i++){
            $(".trow").append("<div class='tcell c" + i +"'></div>");
        }
    };
// Perhaps separate out things further. So, first, have a virtual cell address. And once the virtual cell address is defined, then go ahead and draw it. 

    var RandomCell = function () {
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
        function highlightRow(row) {
            return "." + row + " .tcell"; // needs the .tcell so that it's highlighting each cell in the row.
        }
        function highlightCol(col) {
            return "." + col; // doesn't need a tcell bc it's already a tcell.
        }

        function rowNumberToAddress(number){
            return "r" + number;
        }
        function colNumberToAddress(number){
            return "c" + number;
        }

        this.moveDown = function(){
            var i = this.init_row_number; // set the index
            var row_number = this.row_number // set the row_number locally
            var interval = setInterval(function() {  // things to done within the timer
                row_number = row_number += 1; // increase the row number by 1
                console.log(rowNumberToAddress(row_number)); // print the new row number
                $('.active').removeClass('active');
                $("." + rowNumberToAddress(row_number) + " .tcell").addClass('active'); // target cells within that row and add active class
                // $(highlightRow(row_number)).addClass('active');
                // $('.active').append(i);
                i++;
                if(i > max) clearInterval(interval);
            }, 125);
        }

        this.init_row_number = getRandomInt(min,max);
        this.init_col_number = getRandomInt(min,max);

        
        this.init_col_address = "c" + this.init_col_number;

        this.row_number = this.init_row_number;
        this.col_number = this.init_col_number;

        $( highlightRow( rowNumberToAddress( this.row_number ) ) ).addClass( 'ractive' );
        $( highlightCol( colNumberToAddress( this.col_number ) ) ).addClass( 'cactive' );
        $( '.ractive.cactive' ).addClass( 'active' );
        $('.ractive, .cactive').removeClass('ractive').removeClass('cactive');
    }


        $(document).ready(function(){
            
            var grid = new Grid();
            var random_cell = new RandomCell();
            random_cell.moveDown();
            

        });

    </script>
</body>
</html>